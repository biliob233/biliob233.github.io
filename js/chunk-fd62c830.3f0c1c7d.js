(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-fd62c830"],{"4d63":function(t,a,e){var o=e("83ab"),i=e("da84"),r=e("94ca"),n=e("7156"),s=e("9bf2").f,c=e("241c").f,u=e("44e7"),l=e("ad6d"),h=e("9f7f"),d=e("6eeb"),f=e("d039"),m=e("69f3").set,p=e("2626"),v=e("b622"),g=v("match"),b=i.RegExp,D=b.prototype,V=/a/g,w=/a/g,y=new b(V)!==V,C=h.UNSUPPORTED_Y,x=o&&r("RegExp",!y||C||f((function(){return w[g]=!1,b(V)!=V||b(w)==w||"/a/i"!=b(V,"i")})));if(x){var Y=function(t,a){var e,o=this instanceof Y,i=u(t),r=void 0===a;if(!o&&i&&t.constructor===Y&&r)return t;y?i&&!r&&(t=t.source):t instanceof Y&&(r&&(a=l.call(t)),t=t.source),C&&(e=!!a&&a.indexOf("y")>-1,e&&(a=a.replace(/y/g,"")));var s=n(y?new b(t,a):b(t,a),o?this:D,Y);return C&&e&&m(s,{sticky:e}),s},O=function(t){t in Y||s(Y,t,{configurable:!0,get:function(){return b[t]},set:function(a){b[t]=a}})},_=c(b),T=0;while(_.length>T)O(_[T++]);D.constructor=Y,Y.prototype=D,d(i,"RegExp",Y)}p("RegExp")},"70b3":function(t,a,e){"use strict";e.r(a);var o=function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("VContainer",[e("VRow",{attrs:{dense:""}},[e("VCol",{attrs:{md:6,cols:12}},[e("AuthorInfo",{attrs:{slot:"author-operation","author-data":t.authorData},slot:"author-operation"})],1),e("VCol",{attrs:{md:6,cols:12}},[e("BiliobAuthorOperation",{staticStyle:{height:"100%"},attrs:{mid:t.authorData.mid,name:t.authorData.name,pic:t.authorData.face,"force-focus":t.authorData.forceFocus}})],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",[e("VTabs",{staticClass:"py-0 my-2 elevation-3",attrs:{"show-arrows":""}},[e("VTab",{on:{click:function(a){return t.getPage(0)}}},[e("VIcon",{attrs:{left:""}},[t._v(" mdi-database ")]),t._v("基本 / BASIC ")],1),e("VTab",{on:{click:function(a){return t.getPage(3)}}},[e("VIcon",{attrs:{left:""}},[t._v(" mdi-history ")]),t._v("历史 / HISTORY ")],1),e("VTab",{on:{click:function(a){return t.getPage(1)}}},[e("VIcon",{attrs:{left:""}},[t._v(" mdi-brain ")]),t._v("高级 / ADVENCED ")],1)],1)],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",{attrs:{cols:12}},[e("VSlideYTransition",[3==t.cPage?e("div",[e("VRow",{attrs:{dense:""}},[e("VCol",{attrs:{cols:"12"}},[!t.$store.state.logined||t.$db.user.exp<100?e("BiliobCard",{attrs:{title:"数据访问制限"}},[e("VIcon",{attrs:{color:"warning"}},[t._v(" mdi-alert ")]),e("span",{staticClass:"body-1",staticStyle:{"vertical-align":"middle"}},[t._v(" 您还没有登陆观测者账号！目前只有登陆且经验值>100的观测者才能看到30日之前的UP主数据！ ")]),e("VBtn",{attrs:{small:"",to:"/login",color:"primary"}},[t._v(" 前往登陆 ")])],1):t._e()],1)],1),e("DetailCharts",{staticClass:"mb-2",attrs:{title:"UP主历史数据",options:t.historyDataOptions}}),e("DetailCharts",{staticClass:"mb-2",attrs:{title:"历史变化速率",options:t.authorFansRateOptions}}),e("DetailCharts",{staticClass:"mb-2",attrs:{title:"变化日历",height:220,options:t.authorDataDiffOptions}})],1):t._e(),0==t.cPage?e("div",[e("VRow",{attrs:{dense:""}},[e("VCol",[e("BiliobAuthorBrief",{attrs:{"author-data":t.authorData,"author-top-video":t.authorTopVideo,"author-latest-video":t.authorLatestVideo}})],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",[e("BiliobCard",{attrs:{light:"",border:"bottom",title:"UP主最新数据"}},[e("VRow",t._l([{name:"粉丝总数",value:t.formatedFans},{name:"播放总数",value:t.formatedView},{name:"获赞总数",value:t.formatedLike},{name:"专栏阅读",value:t.formatedArticle}],(function(a){return e("VCol",{key:a.name},[e("div",{staticStyle:{"flex-grow":"1","text-align":"center"}},[e("div",{staticClass:"rank-title caption grey--text"},[t._v(" "+t._s(a.name)+" ")]),e("div",{staticClass:"rank-value caption font-weight-black primary--text"},[t._v(" "+t._s(a.value)+" ")])])])})),1)],1)],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",[e("BiliobAuthorRank",t._b({staticClass:"mb-2",attrs:{"author-data":t.authorData}},"BiliobAuthorRank",t.authorData.rank,!1))],1)],1),void 0!=t.authorData.achievements?e("VRow",{attrs:{dense:""}},[e("VCol",[e("BiliobAuthorAchievements",{attrs:{"author-data":t.authorData}})],1)],1):t._e()],1):1==t.cPage?e("div",[e("VRow",{attrs:{dense:""}},[e("VCol",[e("DetailCharts",{attrs:{title:"粉丝变化效率","sub-title":"每一万播放量增长造成的粉丝变动数",options:t.authorFansEfficiencyOptions}})],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",[e("DetailCharts",{attrs:{options:t.authorTagCloudOptions}},[e("VFlex",{attrs:{slot:"header"},slot:"header"},[e("VTabs",{attrs:{"background-color":"transparent","slider-color":"primary"}},[e("span",{staticClass:"subheading font-weight-light mr-3",staticStyle:{"align-self":"center"}},[e("VIcon",{attrs:{left:"",right:""}},[t._v("mdi-format-list-bulleted-type")])],1),e("VTab",{on:{click:function(a){return t.tagSort("totalView")}}},[e("VIcon",{staticStyle:{"margin-right":"10px"}},[t._v(" mdi-video ")]),t._v(" 投稿量 ")],1),e("VTab",{on:{click:function(a){return t.tagSort("count")}}},[e("VIcon",{staticStyle:{"margin-right":"10px"}},[t._v(" mdi-play-circle-outline ")]),t._v(" 播放量 ")],1)],1)],1)],1)],1)],1)],1):t._e()])],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",[t.authorTopVideo?e("BiliobSlideCard",{attrs:{name:"top-video-slide",title:"UP主播放最高视频",value:t.authorTopVideo,multiple:"","show-arrows":""}},t._l(t.authorTopVideo,(function(a,o){return e("div",{key:o,staticClass:"ma-1"},[e("VCard",{attrs:{to:"/video/av"+a.aid+"/video","max-width":"160",width:"160px"}},[e("VImg",{staticClass:"white--text",attrs:{height:"100px",src:t.zipPic(a.pic)}}),e("VCardText",[e("div",{staticClass:"text--primary caption cards-title"},[e("div",{staticStyle:{"min-height":"40px"}},[t._v(" "+t._s(a.title)+" ")])]),e("div",{staticClass:"caption"},[t._v(" "+t._s(t.formatDate(1e3*a.ctime,"YYYY-MM-DD HH:mm:ss"))+" ")])])],1)],1)})),0):t._e()],1)],1),e("VRow",{attrs:{dense:""}},[e("VCol",[t.authorLatestVideo?e("BiliobSlideCard",{attrs:{name:"latest-video-slide",title:"UP主最新上传视频",value:t.authorLatestVideo,multiple:"","show-arrows":""}},t._l(t.authorLatestVideo,(function(a,o){return e("div",{key:o,staticClass:"ma-1"},[e("VCard",{staticClass:"elevation-3",attrs:{to:"/video/av"+a.aid+"/video","max-width":"160",width:"160px"}},[e("VImg",{staticClass:"white--text",attrs:{height:"100px",src:t.zipPic(a.pic)}}),e("VCardText",[e("div",{staticClass:"text--primary caption cards-title"},[e("div",{staticStyle:{"min-height":"40px"}},[t._v(" "+t._s(a.title)+" ")])]),e("div",{staticClass:"caption"},[t._v(" "+t._s(t.formatDate(1e3*a.ctime,"YYYY-MM-DD HH:mm:ss"))+" ")])])],1)],1)})),0):t._e()],1)],1)],1)},i=[],r=(e("99af"),e("4160"),e("d81d"),e("13d5"),e("b0c0"),e("a9e3"),e("07ac"),e("159b"),e("b334")),n=e("17b5"),s=e("bfa6"),c=e("b44d"),u=(e("4de4"),e("70f2")),l=e("216f"),h=l.convertDateToUTC;function d(t){t=t.data,t=t.filter((function(t){return null!=t.fans&&null!=t.articleView&&null!=t.archiveView}));var a=[],e=7;t.length<=7&&(e=1);for(var o=e;o<t.length;o++){var i=Math.round(1e4*(t[o].fans-t[o-e].fans)/(t[o].archiveView+t[o].articleView-(t[o-e].archiveView+t[o-e].articleView)));i!=1/0&&i!=-1/0&&a.push([t[o].datetime,i])}var r={tooltip:{trigger:"axis",confine:!0,axisPointer:{label:{formatter:function(t){return Math.round(t.value)}}}},grid:{left:"10px",right:"50px",top:"30px",containLabel:!0},dataZoom:[{type:"inside",filterMode:"weakFilter"},{handleSize:"100%",handleStyle:{},bottom:"20px"}],xAxis:{type:"time",axisPointer:{label:{formatter:function(t){return"日期："+u(h(new Date(t.value)),"YYYY-MM-DD")}}}},yAxis:[{type:"value",min:function(t){return t.min>0?0:t.min},splitLine:{show:!0}}],series:[{name:"万点击涨粉数",data:a,smooth:!0,showSymbol:!1,type:"line",smoothMonotone:"x",areaStyle:{},markLine:{label:{position:"middle",formatter:"平均吸粉率 {c}",show:!0},symbol:"",data:[{name:"平均线",type:"average",lineStyle:{color:"#444"}}]}}]};return r}var f=d,m=e("7f85"),p=e("191f");function v(t){t.forEach((function(t){t[0]=Object(r["a"])(t[0])}));var a=t.map((function(t,a){return{name:t[1]+"变化",color:t[2],type:"heatmap",coordinateSystem:"calendar",calendarIndex:a,data:t[0],tooltip:{formatter:function(t){return"".concat(t.seriesName," <br />\n          日期：").concat(t.value[0],"  <br />\n          数值：").concat(Object(p["a"])(t.value[1]))}}}})),e=(new Date).getDay(),o=new Date,i=new Date(o-316224e5-86400*(6-e)*1e3);document.body.offsetWidth<768&&(i=new Date(o-50112e5-86400*(6-e)*1e3));var n=t.map((function(){return o=new Date,{type:"continuous",right:"35",splitLine:{show:!1},itemStyle:{color:"#fff",borderWidth:4,borderColor:"#fff"},cellSize:[18,18],range:[i,o],yearLabel:{show:!1},dayLabel:{nameMap:"cn",position:"end",color:"#888",fontSize:10},monthLabel:{nameMap:"cn",color:"#888",fontSize:10}}})),s=t.map((function(t,a){var e=Math.max.apply(Math,t[0].map((function(t){return new Date(t[0])<i?0:t[1]}))),o=Math.min.apply(Math,t[0].map((function(t){return new Date(t[0])<i?0:t[1]})));return{min:o,max:e,range:[0,e],inRange:{color:[t[2]],opacity:[.2,1]},outOfRange:{color:["#333"],opacity:[.8,.2]},orient:"horizontal",seriesIndex:a,left:"center",show:!1,textStyle:{color:"#000"}}})),c={legend:{selectedMode:"single"},tooltip:{},visualMap:s,calendar:n,series:a};return c}var g=v,b=e("70f2"),D=function t(a){if(a instanceof Array){for(var e=[],o=0;o<a.length;++o)e[o]=t(a[o]);return e}if(a instanceof Object){var i={};for(var r in a)i[r]=t(a[r]);return i}return a},V={name:"Author",components:{AuthorInfo:n["default"],DetailCharts:s["default"]},data:function(){return{authorData:{},authorTopVideo:void 0,authorLatestVideo:void 0,relationshipOptions:Object(),authorFansRateOptions:Object(),authorFansEfficiencyOptions:Object(),authorTagCloudOptions:Object(),authorDataDiffOptions:Object(),historyDataOptions:Object(),mid:Number(),cPage:0}},metaInfo:function(){return{title:"".concat(void 0==this.authorName?"载入UP主信息中":this.authorName," - UP主数据详情 - BiliOB233 - B站历史数据统计分析站点"),meta:[{vmid:"description",name:"description",content:this.briefInfo},{vmid:"keywords",name:"keywords",content:this.authorKeywords}]}},computed:{authorKeywords:function(){var t="";return void 0!=this.authorTagCloudData&&(t=this.authorTagCloudData.reduce((function(t,a){return t+a._id+","}),"")),this.authorData.name+","+t+this.$baseKeywords},authorName:function(){if(void 0!=this.authorData)return this.authorData.name},formatedFans:function(){return void 0==this.authorData.cFans?"-":this.$numberFormat(this.authorData.cFans)},formatedView:function(){return void 0==this.authorData.cArchiveView?"-":this.$numberFormat(this.authorData.cArchiveView)},formatedLike:function(){return void 0==this.authorData.cLike?"-":this.$numberFormat(this.authorData.cLike)},formatedArticle:function(){return void 0==this.authorData.cLike?"-":this.$numberFormat(this.authorData.cArticleView)},authorChannelInfo:function(){return void 0==this.authorData.channels||0==this.authorData.channels.length?[" "," "]:[this.authorData.channels[0].name,this.authorData.channels[0].count]},briefInfo:function(){if(void 0==this.authorData.name||void 0==this.authorTopVideo.content||void 0==this.authorTopVideo.content[0])return"载入中";var t="".concat(this.authorData.name," 是 ").concat(""==this.authorData.official?"没有认证的UP主":this.authorData.official,"。他是主要活跃在").concat(this.authorChannelInfo[0],"区的UP主，在该分区共存活 ").concat(this.authorChannelInfo[1]," 个稿件。代表作有《 ").concat(this.authorTopVideo[0].title,"》。");return t}},mounted:function(){var t=this;void 0!=this.$route.params.mid&&(this.mid=this.$route.params.mid),this.$store.commit("toAuthor"),this.axios.get("/author/"+this.mid).then((function(a){void 0!=a.data.channels&&(a.data.channels=Object.values(a.data.channels),a.data.channels.sort((function(t,a){return a.count-t.count}))),t.authorData=a.data,t.authorFansEfficiencyOptions=f(D(t.authorData));var e=[],o=[],i=[];t.authorData.data.forEach((function(t){void 0!=t.fans&&0!=t.fans&&e.push([t.datetime,t.fans]),void 0!=t.like&&0!=t.like&&o.push([t.datetime,t.like]),void 0!=t.archiveView&&0!=t.archiveView&&i.push([t.datetime,t.archiveView])})),e=e.reverse(),o=o.reverse(),i=i.reverse(),t.authorFansRateOptions=Object(c["a"])([[Object(r["a"])(e),"粉丝数","#1e88e5"],[Object(r["a"])(i),"播放数","#2b821d"],[Object(r["a"])(o),"获赞数","#c12e34"]],"area","YYYY-MM-DD"),t.authorDataDiffOptions=g([[e,"粉丝数","#1e88e5"],[i,"播放数","#2b821d"],[o,"获赞数","#c12e34"]]),t.historyDataOptions=Object(c["a"])([[e,"粉丝数","#1e88e5"],[i,"播放数","#2b821d"],[o,"获赞数","#c12e34"]]),1!=t.authorData.forceFocus&&t.authorData.forceFocus})),this.axios.get("/video/v3/author?mid=".concat(this.mid,"&sort=view")).then((function(a){t.authorTopVideo=a.data})),this.axios.get("/video/v3/author?mid=".concat(this.mid,"&sort=ctime")).then((function(a){t.authorLatestVideo=a.data})),this.axios.get("/author/tag?mid=".concat(this.mid,"&limit=",50)).then((function(a){t.authorTagCloudData=a.data,t.authorTagCloudOptions=Object(m["a"])(t.authorTagCloudData.map((function(t){return{name:t._id,value:t.totalView}})))}))},methods:{formatDate:function(t){return b(t,"YYYY-MM-DD HH:mm:ss")},getPage:function(t){this.cPage=t},tagSort:function(t){this.authorTagCloudOptions=Object(m["a"])(this.authorTagCloudData.map((function(a){return{name:a._id,value:a[t]}})))}}},w=V,y=(e("f7ae"),e("2877")),C=e("6544"),x=e.n(C),Y=e("8336"),O=e("b0af"),_=e("99d9"),T=e("62ad"),M=e("a523"),S=e("0e8f"),k=e("132d"),R=e("adda"),P=e("0fd9"),I=e("0789"),A=e("71a3"),F=e("fe57"),L=Object(y["a"])(w,o,i,!1,null,"4804877b",null);a["default"]=L.exports;x()(L,{VBtn:Y["a"],VCard:O["a"],VCardText:_["b"],VCol:T["a"],VContainer:M["a"],VFlex:S["a"],VIcon:k["a"],VImg:R["a"],VRow:P["a"],VSlideYTransition:I["h"],VTab:A["a"],VTabs:F["a"]})},add1:function(t,a,e){},b334:function(t,a,e){"use strict";e("4de4"),e("d81d"),e("b680");var o=e("c8d5"),i=e("70f2"),r=e("8946");function n(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,e=[];if(t=t.map((function(t){return[o(t[0],new Date),t[1]]})).filter((function(t,a,e){return!(a-1>=0&&e[a-1][1]==e[a][1])})),t.length<=1)return t;var n=t[0][0],s=i(n,"YYYY-MM-DD"),c=o(s,"YYYY-MM-DD",new Date),u=t[t.length-1][0],l=i(u,"YYYY-MM-DD"),h=0,d=1;while(l!=s){c=r(c,1),s=i(c,"YYYY-MM-DD");while(d+1<t.length&&t[d][0]<c)d++;while(h+2<t.length&&t[h+1][0].getTime()<c)h++;var f=t[d][1],m=t[d][0],p=t[h][1],v=t[h][0],g=p+(c-v)/(m-v)*(f-p);isNaN(g)||e.push([s,g])}var b=[],D=a;while(D<e.length){var V=e[D][1]-e[D-a][1];V=V>1||V<-1?Math.round(V):V.toFixed(2),b.push([e[D-1][0],V]),D++}return b}a["a"]=n},b44d:function(t,a,e){"use strict";e("4de4"),e("d81d"),e("b0c0"),e("4d63"),e("ac1f"),e("25f0"),e("5319");var o=e("191f"),i=e("70f2"),r=e.n(i);function n(t){var a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"line",e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"YYYY-MM-DD HH:mm";if(0!=t.length){var i=t.map((function(t){var e=(new Date).getTimezoneOffset()/60,o=-8-e;t[0]=t[0].map((function(t){var a;return"string"==typeof t[0]?(a=new Date(t[0].replace(new RegExp(/-/gm),"/")),a.setHours(a.getHours()+o)):a=t[0],[a,t[1]]}));var i={name:t[1],data:t[0],smooth:!1,showSymbol:!1,color:t[2]};return"area"==a?(i.type="line",i.name+="增长",i.areaStyle={color:t[2]+"33"}):i.type=a,i})),n={legend:{selectedMode:"single"},grid:{left:"10px",right:"50px",top:"30px",containLabel:!0},dataZoom:[{type:"inside",filterMode:"weakFilter"},{handleSize:"100%",handleStyle:{},bottom:"20px"}],tooltip:{trigger:"axis",confine:!0,axisPointer:{label:{formatter:function(t){return r()(t.value,e)}}}},xAxis:{type:"time",axisPointer:{label:{formatter:function(t){return"日期："+r()(t.value,e)}}}},yAxis:[{type:"value",min:function(t){return t.min>0&&"area"==a?0:t.min},axisLabel:{formatter:o["a"]}}],series:i.filter((function(t){return 0!=t.data.length}))};return n}}a["a"]=n},f7ae:function(t,a,e){"use strict";var o=e("add1"),i=e.n(o);i.a}}]);